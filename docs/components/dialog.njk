{% extends "_includes/layout.njk" %}
{% from "_includes/macros.njk" import example %}
{% set title = "Dialog" %}

{% block content %}

  <h3>Classes</h3>
  <dl>
    <dt><code>.dialog</code></dt>
    <dd>Centered modal overlay with glass background and backdrop.</dd>
    <dt><code>.dialog-close</code></dt>
    <dd>Positioned close button (top-right corner).</dd>
  </dl>

  {% call example("Default") %}
<button onclick="this.nextElementSibling.showModal()" class="btn-tinted">Close Document</button>

<dialog class="dialog">
  <header>
    <h3>Save changes to "Untitled"?</h3>
    <p>Your changes will be lost if you don't save them.</p>
  </header>
  <footer>
    <button onclick="this.closest('dialog').close()" class="btn-tinted">Don't Save</button>
    <button onclick="this.closest('dialog').close()" class="btn-gray">Cancel</button>
    <button onclick="this.closest('dialog').close()" class="btn-filled">Save</button>
  </footer>
</dialog>
{% endcall %}

  {% call example("Destructive") %}
<button onclick="this.nextElementSibling.showModal()" class="btn-filled btn-destructive">Delete Project</button>

<dialog class="dialog">
  <header>
    <h3>Delete project?</h3>
    <p>This will permanently delete the project "My Portfolio" and all of its files. This action is irreversible.</p>
  </header>
  <footer>
    <button onclick="this.closest('dialog').close()" class="btn-tinted">Cancel</button>
    <button onclick="this.closest('dialog').close()" class="btn-filled btn-destructive">Delete Project</button>
  </footer>
</dialog>
{% endcall %}

  {% call example("With Icon") %}
<button onclick="this.nextElementSibling.showModal()" class="btn-tinted">Sign Out</button>

<dialog class="dialog">
  <header>
    <div class="mx-auto mb-4 flex size-12 items-center justify-center rounded-full bg-destructive/10">
      <svg class="size-6 text-destructive" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"/></svg>
    </div>
    <h3 class="text-center">Sign out of your account?</h3>
    <p class="text-center">You will need to enter your credentials again to sign back in.</p>
  </header>
  <footer>
    <button onclick="this.closest('dialog').close()" class="btn-tinted">Cancel</button>
    <button onclick="this.closest('dialog').close()" class="btn-filled btn-destructive">Sign Out</button>
  </footer>
</dialog>
{% endcall %}

  {% call example("Form Dialog") %}
<button onclick="this.nextElementSibling.showModal()" class="btn-tinted">Edit Profile</button>

<dialog class="dialog">
  <header>
    <h2>Edit Profile</h2>
    <p>Make changes to your profile here.</p>
  </header>
  <section>
    <div class="space-y-4">
      <label class="space-y-2">Name
        <input type="text" value="John Doe" />
      </label>
      <label class="space-y-2">Email
        <input type="email" value="john@example.com" />
      </label>
    </div>
  </section>
  <footer>
    <button onclick="this.closest('dialog').close()" class="btn-tinted">Cancel</button>
    <button class="btn-filled" onclick="this.closest('dialog').close()">Save Changes</button>
  </footer>
</dialog>
{% endcall %}

  {% call example("Scrollable Content") %}
<button onclick="this.nextElementSibling.showModal()" class="btn-tinted">Scrollable Dialog</button>

<dialog class="dialog" style="max-height:400px;">
  <header>
    <h2>Terms of Service</h2>
    <p>Please read the following terms carefully.</p>
  </header>
  <section class="overflow-y-auto" style="max-height:200px;">
    <div class="space-y-4 text-sm text-muted-foreground">
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.</p>
      <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident.</p>
      <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis.</p>
      <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt.</p>
      <p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias.</p>
      <p>Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae.</p>
    </div>
  </section>
  <footer>
    <button onclick="this.closest('dialog').close()" class="btn-tinted">Decline</button>
    <button class="btn-filled" onclick="this.closest('dialog').close()">Accept</button>
  </footer>
</dialog>
{% endcall %}

  {% call example("With Close Button") %}
<button onclick="this.nextElementSibling.showModal()" class="btn-tinted">Share Link</button>

<dialog class="dialog">
  <button aria-label="Close" onclick="this.closest('dialog').close()" class="absolute top-4 right-4 inline-flex size-7 items-center justify-center rounded-lg text-muted-foreground transition-colors hover:bg-accent hover:text-foreground cursor-pointer">
    <svg class="size-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/></svg>
  </button>
  <header>
    <h2>Share Link</h2>
    <p>Anyone with the link will be able to view this document.</p>
  </header>
  <section>
    <div class="flex gap-2">
      <input type="text" value="https://example.com/doc/abc123" readonly class="flex-1" />
      <button class="btn-gray" onclick="navigator.clipboard && navigator.clipboard.writeText('https://example.com/doc/abc123')">Copy</button>
    </div>
  </section>
  <footer></footer>
</dialog>
{% endcall %}

  {% call example("Custom Content") %}
<button onclick="this.nextElementSibling.showModal()" class="btn-tinted">Invite Members</button>

<dialog class="dialog" style="max-width: 480px;">
  <header>
    <h2>Invite Team Members</h2>
    <p>Add colleagues to collaborate on this project.</p>
  </header>
  <section>
    <div class="space-y-4">
      <div class="flex gap-2">
        <input type="email" placeholder="email@example.com" class="flex-1" />
        <button class="btn-gray">Invite</button>
      </div>
      <div class="space-y-2">
        <div class="flex items-center justify-between rounded-lg border px-3 py-2">
          <div class="flex items-center gap-2.5">
            <div class="avatar size-8 text-xs bg-primary/10 text-primary">SC</div>
            <div>
              <p class="text-sm font-medium">Sarah Chen</p>
              <p class="text-xs text-muted-foreground">sarah@example.com</p>
            </div>
          </div>
          <span class="text-xs text-muted-foreground">Owner</span>
        </div>
        <div class="flex items-center justify-between rounded-lg border px-3 py-2">
          <div class="flex items-center gap-2.5">
            <div class="avatar size-8 text-xs bg-primary/10 text-primary">JD</div>
            <div>
              <p class="text-sm font-medium">John Doe</p>
              <p class="text-xs text-muted-foreground">john@example.com</p>
            </div>
          </div>
          <select class="h-auto w-auto py-1 pl-2 pr-8 text-xs rounded-lg">
            <option>Viewer</option>
            <option selected>Editor</option>
            <option>Admin</option>
          </select>
        </div>
      </div>
    </div>
  </section>
  <footer>
    <button onclick="this.closest('dialog').close()" class="btn-tinted">Cancel</button>
    <button class="btn-filled" onclick="this.closest('dialog').close()">Done</button>
  </footer>
</dialog>
{% endcall %}

  <section class="mt-12">
    <h2 class="text-xl font-bold tracking-tight">Usage</h2>
    <p class="mt-2 text-[15px] text-muted-foreground">Adds backdrop click to close with exit animation, focus trapping, scroll lock, and focus restoration. The native <code>&lt;dialog&gt;</code> element handles open/close â€” this script is optional.</p>
    <div class="snippet mt-4" data-active style="border-radius: var(--radius-lg); overflow: hidden;">
      <pre><code class="language-html">&lt;!-- npm --&gt;
&lt;script src="node_modules/ciderui/js/dialog.js"&gt;&lt;/script&gt;

&lt;!-- CDN --&gt;
&lt;script src="https://unpkg.com/ciderui/js/dialog.js"&gt;&lt;/script&gt;</code></pre>
    </div>
  </section>

{% endblock %}
