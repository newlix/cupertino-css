@import "tailwindcss";
@import "../src/css/ciderui.css";

/* ─── Docs Layout ─── */
@layer components {

  /* Sidebar */
  .docs-sidebar {
    @apply fixed left-0 top-0 z-40 h-screen w-[260px] flex flex-col bg-background;
    & a { @apply no-underline; &:hover { @apply no-underline; } }
  }
  .docs-sidebar-header {
    @apply flex items-center justify-between px-5 py-4 shrink-0;
  }
  .docs-icon-btn {
    @apply inline-flex items-center justify-center size-8 p-0 rounded-md cursor-pointer;
    color: var(--color-muted-foreground) !important;
    transition: color 0.15s;
    &:hover { color: var(--color-foreground) !important; }
  }
  .docs-nav {
    @apply flex-1 overflow-y-auto;
    scrollbar-width: thin;
    scrollbar-color: transparent transparent;
    &:hover { scrollbar-color: var(--surface-5) transparent; }
    & h2 {
      @apply px-2 pb-1 pt-0 text-[13px] font-medium text-muted-foreground;
    }
    & a[href] {
      @apply flex items-center rounded-md px-2 py-1.5 text-sm;
      color: var(--color-muted-foreground);
      text-decoration: none;
      transition: color 0.15s, background 0.15s;
      &:hover {
        color: var(--color-foreground);
        text-decoration: none;
      }
      &[data-active] {
        @apply font-medium;
        color: var(--color-foreground);
        background: var(--color-accent);
      }
    }
  }

  /* Main content area */
  .docs-main {
    @apply ml-[260px] min-h-screen;
  }

  .snippet-preview > figure {
    position: relative;
    & > .card, & > table, & > .banner, & > details, & > input, & > textarea, & > select, & > dialog, & > .list,& > form, & > fieldset, & > .command, & > .cider {
      @apply w-full;
    }
    & > .cider {
      max-width: none;
      padding-left: 0;
      padding-right: 0;
      margin: 0;
    }
    & pre {
      background: transparent;
      border-radius: 0;
    }
    &::after {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      font-size: 10px;
      font-weight: 600;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      color: var(--color-muted-foreground);
      opacity: 0.5;
    }
  }
  /* Mobile hamburger */
  .docs-hamburger {
    @apply hidden fixed top-4 left-4 z-50 size-9 items-center justify-center rounded-lg text-muted-foreground cursor-pointer border bg-background;
    &:hover { @apply text-foreground bg-accent; }
  }
  .docs-overlay {
    @apply fixed inset-0 z-30 hidden;
    background: oklch(0 0 0 / 0.4);
    backdrop-filter: blur(4px);
  }

  /* ========== SNIPPET (Code Block — docs only) ========== */
  .snippet {
    @apply rounded-[10px] border overflow-hidden;
    corner-shape: squircle;
    & > pre {
      @apply overflow-x-auto p-4 m-0 text-[13px] leading-relaxed rounded-none;
      background: var(--surface-2);
      & code, & code[class*="language-"], & code.hljs {
        @apply font-[ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace] text-[13px] font-normal p-0 rounded-none;
        background: transparent;
        color: var(--color-foreground);
      }
    }
    & > header {
      @apply flex items-center justify-between px-4 py-2 overflow-hidden;
      border-bottom: 1px solid var(--panel-border);
      background: var(--surface-2);
      & > span {
        @apply text-[12px] font-medium text-muted-foreground;
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      }
      & > nav {
        @apply flex gap-0.5;
        & > button {
          @apply rounded-md px-2 py-1 text-[12px] font-medium text-muted-foreground;
          font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
          transition: all 0.15s var(--apple-ease);
          &:hover {
            @apply text-foreground;
            background: var(--surface-3);
          }
          &:focus-visible { outline: 2px solid var(--color-primary); outline-offset: 1px; }
          &[data-active] {
            @apply text-foreground;
            background: var(--surface-4);
          }
        }
      }
      & > button {
        @apply rounded-md border px-2 py-1 text-[12px] font-medium;
        background: var(--surface-2);
        border-color: var(--color-border);
        color: var(--color-muted-foreground);
        transition: all 0.15s var(--apple-ease);
        opacity: 0;
        &:hover {
          background: var(--surface-4);
          color: var(--color-foreground);
        }
        &:focus-visible { outline: 2px solid var(--color-primary); outline-offset: 1px; opacity: 1; }
        &:active {
          transform: scale(var(--apple-press-scale));
        }
      }
    }
    &:hover > header > button {
      opacity: 1;
    }
    & > .snippet-preview {
      border-bottom: 1px solid var(--panel-border);
      & > figure {
        @apply py-6 px-6 m-0;
      }
    }
    & > pre[data-panel]:not([data-active]) {
      @apply hidden;
    }
  }
  .snippet-lines {
    counter-reset: line;
    & .snippet-line {
      display: flex;
      &::before {
        counter-increment: line;
        content: counter(line);
        @apply inline-block shrink-0 text-right pr-4 text-muted-foreground/40 select-none;
        min-width: 2rem;
        font-variant-numeric: tabular-nums;
      }
    }
  }

  /* Mobile responsive */
  @media (max-width: 768px) {
    .docs-sidebar {
      @apply -translate-x-full transition-transform duration-300;
    }
    .docs-sidebar.open {
      @apply translate-x-0;
    }
    .docs-overlay.open {
      @apply block;
    }
    .docs-main {
      @apply ml-0;
    }
    .docs-hamburger {
      @apply inline-flex;
    }
  }
}
