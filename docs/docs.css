@import "tailwindcss";
@import "../src/css/ciderui.css";

/* ─── Docs Layout ─── */
@layer components {

  /* Sidebar */
  .docs-sidebar {
    @apply fixed left-0 top-0 z-40 h-screen w-[260px] overflow-y-auto border-r;
    background: oklch(from var(--color-background) l c h / 0.72);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
  }
  .docs-sidebar a {
    @apply flex items-center rounded-lg px-2 py-1.5 text-[13px] font-medium text-muted-foreground transition-colors duration-150;
    &:hover {
      @apply text-foreground;
      background: oklch(from var(--color-accent) l c h / 0.6);
    }
    &[data-active] {
      @apply text-primary;
      background: oklch(from var(--color-primary) l c h / 0.08);
    }
  }


  /* Main content area */
  .docs-main {
    @apply ml-[260px] min-h-screen;
  }

  .snippet-preview > figure {
    position: relative;
    & > .card, & > .field, & > .accordion, & > table, & > .banner, & > details, & > input, & > textarea, & > select, & > dialog, & > .input-group, & > .input-group-attached, & > .list-row, & > .list-section, & > form, & > fieldset, & > .sidebar, & > .theme-switcher, & > .command, & > .cider {
      @apply w-full;
    }
    & > .cider {
      max-width: none;
      padding-left: 0;
      padding-right: 0;
      margin: 0;
    }
    & pre {
      background: transparent;
      border-radius: 0;
    }
    &::after {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      font-size: 10px;
      font-weight: 600;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      color: var(--color-muted-foreground);
      opacity: 0.5;
    }
  }
  .docs-copy-btn {
    @apply absolute right-3 top-3 rounded-md border px-2 py-1 text-[11px] font-medium transition-all duration-200 cursor-pointer;
    background: oklch(0.971 0.003 285.66 / 0.8);
    border-color: oklch(0.862 0.007 286.02);
    color: oklch(0.540 0.008 286.01);
    &:hover {
      background: oklch(0.920 0.003 285.66);
      color: oklch(0.232 0.004 285.99);
    }
    &:active {
      transform: scale(var(--apple-press-scale));
    }
  }
  :is(.dark) .docs-copy-btn {
    background: oklch(0.274 0.004 285.99 / 0.6);
    border-color: oklch(0.350 0.004 285.99);
    color: oklch(0.630 0.006 286.01);
    &:hover {
      background: oklch(0.350 0.004 285.99);
      color: oklch(0.971 0.003 285.66);
    }
  }

  /* Theme toggle */
  .docs-theme-toggle {
    @apply flex size-8 items-center justify-center rounded-lg text-muted-foreground transition-colors cursor-pointer;
    &:hover {
      @apply text-foreground;
      background: var(--color-accent);
    }
  }

  /* Mobile hamburger */
  .docs-hamburger {
    @apply hidden fixed top-4 left-4 z-50 size-9 items-center justify-center rounded-lg text-muted-foreground cursor-pointer border;
    background: oklch(from var(--color-background) l c h / 0.72);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border-color: var(--color-border);
    &:hover {
      @apply text-foreground;
      background: var(--color-accent);
    }
  }
  .docs-overlay {
    @apply fixed inset-0 z-30 hidden;
    background: oklch(0 0 0 / 0.4);
    backdrop-filter: blur(4px);
  }

  /* ─── Homepage ─── */
  .home-nav {
    @apply sticky top-0 z-50 border-b;
    background: oklch(from var(--color-background) l c h / 0.72);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
  }
  .home-showcase {
    @apply mx-auto px-6;
    max-width: 64rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }
  .home-showcase-row {
    display: grid;
    gap: 1.5rem;
  }
  .home-showcase-2 { grid-template-columns: repeat(2, 1fr); }
  .home-showcase-3 { grid-template-columns: repeat(3, 1fr); }
  .home-showcase-cell {
    display: flex;
    flex-direction: column;
    min-width: 0;
  }
  .home-showcase-card {
    @apply rounded-2xl border overflow-hidden;
    background: var(--color-card);
    padding: 1.5rem;
    flex: 1;
    box-shadow: 0 1px 3px rgb(0 0 0 / 0.02), 0 4px 16px rgb(0 0 0 / 0.03);
  }
  @media (max-width: 900px) {
    .home-showcase-3 {
      grid-template-columns: repeat(2, 1fr);
      & > :last-child:nth-child(odd) { grid-column: 1 / -1; }
    }
  }
  @media (max-width: 640px) {
    .home-hero { @apply py-12; }
    .home-showcase-2, .home-showcase-3 { grid-template-columns: 1fr; }
  }

  /* ─── Homepage Demo Tabs ─── */
  .home-demo-panel {
    display: none;
    &[data-active] { display: block; }
  }
  .home-demo-frame {
    @apply rounded-2xl border overflow-hidden;
    background: var(--color-card);
    min-height: 500px;
  }

  /* Mail demo */
  .demo-mail-layout {
    display: grid;
    grid-template-columns: 220px 280px 1fr;
    min-height: 500px;
  }
  .demo-mail-sidebar {
    @apply border-r p-0;
    & .sidebar-item {
      @apply flex items-center gap-2.5 rounded-lg px-2.5 py-2 text-[13px] text-foreground/70 cursor-pointer;
      & svg { @apply size-4 text-muted-foreground; }
      &:hover { background: var(--surface-3); @apply text-foreground; }
      &[data-active] { background: var(--surface-4); @apply text-foreground font-medium; }
    }
  }

  .demo-dashboard-stats {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1rem;
    margin-bottom: 1.5rem;
  }
  .demo-dashboard-bottom {
    display: grid;
    grid-template-columns: 1.5fr 1fr;
    gap: 1.5rem;
  }

  /* Settings demo */
  .demo-settings-layout {
    display: grid;
    grid-template-columns: 200px 1fr;
    min-height: 500px;
  }
  .demo-settings-nav {
    @apply border-r p-4;
    & .sidebar-item {
      @apply flex items-center gap-2.5 rounded-lg px-2.5 py-2 text-[13px] text-foreground/70 cursor-pointer;
      & svg { @apply size-4 text-muted-foreground; }
      &:hover { background: var(--surface-3); @apply text-foreground; }
      &[data-active] { background: var(--surface-4); @apply text-foreground font-medium; }
    }
  }

  /* Auth demo */
  .demo-auth {
    @apply flex items-center justify-center p-8;
    min-height: 500px;
    background: linear-gradient(160deg, oklch(0.96 0.015 240) 0%, oklch(0.94 0.025 270) 40%, oklch(0.96 0.018 300) 100%);
  }
  :is(.dark) .demo-auth {
    background: linear-gradient(160deg, oklch(0.17 0.015 240) 0%, oklch(0.14 0.025 270) 40%, oklch(0.17 0.018 300) 100%);
  }

  /* Demo responsive */
  @media (max-width: 1024px) {
    .demo-mail-layout {
      grid-template-columns: 260px 1fr;
    }
    .demo-mail-sidebar {
      display: none;
    }
    .demo-dashboard-stats {
      grid-template-columns: repeat(2, 1fr);
    }
    .demo-dashboard-bottom {
      grid-template-columns: 1fr;
    }
  }
  @media (max-width: 768px) {
    .demo-mail-layout {
      grid-template-columns: 1fr;
    }
    .demo-mail-list {
      display: none;
    }
    .demo-mail-detail {
      border-top: 1px solid var(--color-border);
    }
    .demo-settings-layout {
      grid-template-columns: 1fr;
    }
    .demo-settings-nav {
      display: none;
    }
    .demo-dashboard-stats {
      grid-template-columns: 1fr;
    }
  }

  /* Mobile responsive */
  @media (max-width: 768px) {
    .docs-sidebar {
      @apply -translate-x-full transition-transform duration-300;
    }
    .docs-sidebar.open {
      @apply translate-x-0;
    }
    .docs-overlay.open {
      @apply block;
    }
    .docs-main {
      @apply ml-0;
    }
    .docs-hamburger {
      @apply inline-flex;
    }
  }
}
