/* ========== COMMAND ========== */
.command {
  @apply flex flex-col rounded-2xl overflow-hidden;
  background: var(--glass-bg-opaque);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  corner-shape: squircle;
  box-shadow: var(--shadow-lg), var(--float-ring);
  & > header {
    @apply flex items-center gap-2 px-3.5;
    border-bottom: 1px solid var(--panel-border);
    & svg { @apply size-4 shrink-0 text-muted-foreground; }
    & input {
      @apply h-14 flex-1 border-0 rounded-none bg-transparent px-0 text-[18px] text-foreground outline-none;
      &::placeholder { @apply text-muted-foreground; opacity: 0.6; }
    }
  }
  & [role="menu"], & [role="listbox"] {
    @apply max-h-72 overflow-y-auto p-1.5;
    & [role="group"] {
      & > [role="heading"], & > span[role="heading"] {
        @apply block px-2.5 py-1.5 text-[11px] font-semibold text-muted-foreground;
      }
    }
    & [role="menuitem"], & [role="option"] {
      @apply flex items-center gap-2.5 rounded-[8px] px-2.5 py-1.5 text-[13px] text-foreground cursor-pointer;
      transition: background-color 0.12s var(--apple-ease);
      & svg { @apply size-4 shrink-0 text-muted-foreground; }
      & span { @apply flex-1; }
      &:hover { background: var(--surface-2); }
      &:focus-visible { outline: 3px solid oklch(from var(--color-primary) l c h / 0.3); outline-offset: -3px; }
      &[data-active], &[data-highlighted] { background: oklch(from var(--color-primary) l c h / 0.15); color: var(--color-foreground); & svg { color: var(--color-primary); } }
      &[aria-disabled="true"] { @apply opacity-50 pointer-events-none; }
      &[data-selected]::after {
        content: "";
        display: inline-block;
        width: 1rem; height: 1rem; margin-left: auto;
        background: currentColor;
        mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='black' stroke-width='2.5'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M5 13l4 4L19 7'/%3E%3C/svg%3E");
        mask-size: contain;
        mask-repeat: no-repeat;
        -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='black' stroke-width='2.5'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M5 13l4 4L19 7'/%3E%3C/svg%3E");
        -webkit-mask-size: contain;
        -webkit-mask-repeat: no-repeat;
        flex-shrink: 0;
      }
    }
    & hr[role="separator"], & hr {
      @apply my-1 h-px border-0;
      background: var(--panel-border);
    }
    &.command-empty::after {
      content: attr(data-empty);
      @apply block py-6 text-center text-[13px] text-muted-foreground;
    }
  }
}
dialog.command-dialog,
.command-dialog {
  @apply m-auto w-full max-w-2xl rounded-[18px] border-0 bg-transparent p-0;
  corner-shape: squircle;
  box-shadow: var(--shadow-xl);
  &::backdrop {
    background: var(--backdrop-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
  }
  &[open] { animation: dialogShow 0.25s var(--apple-spring); }
  & > .command {
    box-shadow: none;
    border: 1px solid var(--panel-border);
  }
}
