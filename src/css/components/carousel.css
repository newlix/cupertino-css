/* ========== CAROUSEL ========== */
.carousel {
  @apply relative w-full;
}
.carousel-content {
  @apply flex gap-4 overflow-x-auto scroll-smooth;
  scroll-snap-type: x mandatory;
  scrollbar-width: none;
  -webkit-overflow-scrolling: touch;
  /* overflow-x:auto forces overflow-y:auto per CSS spec, clipping shadows/borders.
     Padding creates breathing room; negative margin keeps layout stable. */
  padding-block: 8px;
  margin-block: -8px;
  &::-webkit-scrollbar { display: none; }
}
.carousel-item {
  @apply shrink-0;
  scroll-snap-align: center;
  width: calc(100% - 2rem);
}
.carousel-item-half {
  @apply shrink-0;
  scroll-snap-align: start;
  width: calc(50% - 0.5rem);
}
.carousel-item-third {
  @apply shrink-0;
  scroll-snap-align: start;
  width: calc(33.333% - 0.75rem);
}
.carousel-prev,
.carousel-next {
  @apply absolute top-1/2 z-10 flex size-8 -translate-y-1/2 items-center justify-center rounded-full text-muted-foreground cursor-pointer;
  background: var(--glass-bg);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  box-shadow: var(--shadow-sm), var(--float-ring);
  opacity: 0;
  transition: all 0.2s var(--apple-ease), opacity 0.2s var(--apple-ease);
  &:hover { box-shadow: var(--shadow), var(--float-ring); }
  &:active { transform: translateY(-50%) scale(var(--apple-press-scale)); }
  &:focus-visible { opacity: 1; outline: 3px solid oklch(from var(--color-primary) l c h / 0.3); outline-offset: 2px; }
  &:disabled { @apply pointer-events-none; opacity: 0; }
  & svg { @apply size-4; }
}
.carousel:hover .carousel-prev:not(:disabled),
.carousel:hover .carousel-next:not(:disabled) {
  opacity: 1;
}
.carousel-prev { left: 0.75rem; }
.carousel-next { right: 0.75rem; }
.carousel-indicators {
  @apply mt-4 flex items-center justify-center gap-1.5;
}
.carousel-indicator {
  @apply rounded-full cursor-pointer;
  width: 7px;
  height: 7px;
  background: oklch(from var(--color-foreground) l c h / 0.2);
  transition: all 0.3s var(--apple-spring);
  &:hover { background: oklch(from var(--color-foreground) l c h / 0.35); }
  &:focus-visible { outline: 3px solid oklch(from var(--color-primary) l c h / 0.3); outline-offset: 2px; }
  &[data-active] {
    width: 21px;
    background: oklch(from var(--color-foreground) l c h / 0.6);
  }
  .dark & {
    background: oklch(from var(--color-foreground) l c h / 0.4);
    &:hover { background: oklch(from var(--color-foreground) l c h / 0.55); }
    &[data-active] { background: oklch(from var(--color-foreground) l c h / 0.75); }
  }
}
