/* ========== FILE TREE ========== */
.file-tree {
  @apply rounded-2xl bg-card;
  box-shadow: var(--shadow-sm), var(--panel-ring);

  & summary {
    list-style: none;
    cursor: pointer;
    &::-webkit-details-marker { display: none; }
  }

  /* Root header */
  & > summary {
    @apply flex items-center justify-between rounded-2xl px-4 py-3 text-[13px] font-medium text-foreground;
    transition: background-color 0.15s var(--apple-ease);
    &:hover { background: var(--surface-1); }
  }
  &[open] > summary { @apply rounded-b-none; }

  /* Tree body */
  & > div {
    @apply p-2;

    & summary {
      @apply flex items-center gap-1.5 rounded-lg px-2 py-1 text-[13px] text-foreground;
      transition: background-color 0.15s var(--apple-ease);
      &:hover { background: var(--surface-2); }
      &:focus-visible { outline: 3px solid oklch(from var(--primary) l c h / 0.3); outline-offset: -3px; }
      & > svg { @apply size-4 shrink-0 text-muted-foreground; }
    }

    & .file-tree-chevron {
      @apply size-3.5 shrink-0 text-muted-foreground;
      transition: transform 0.2s var(--apple-ease);
    }
    & details[open] > summary > .file-tree-chevron {
      transform: rotate(90deg);
    }

    /* 12px per nesting level (Xcode-like density) */
    & details > div { @apply pl-3; }
  }

  /* File item */
  & .file-tree-item {
    @apply flex cursor-pointer items-center gap-1.5 rounded-lg py-1 pr-2 text-[13px] text-muted-foreground;
    padding-left: 1.75rem; /* aligns file icon with folder icon: px-2 + chevron + gap */
    transition: background-color 0.15s var(--apple-ease);
    &:hover { background: var(--surface-2); }
    &:focus-visible { outline: 3px solid oklch(from var(--primary) l c h / 0.3); outline-offset: -3px; }
    & > svg { @apply size-4 shrink-0; }
  }
}
