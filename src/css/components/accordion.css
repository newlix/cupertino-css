/* ========== ACCORDION ========== */
.accordion {
  @apply rounded-2xl bg-card;
  corner-shape: squircle;
  box-shadow: var(--panel-ring);
  & details + details {
    border-top: 1px solid var(--panel-border);
  }
  & summary {
    @apply flex cursor-pointer list-none items-center justify-between px-4 py-4 text-[15px] font-medium text-foreground;
    min-height: 44px;
    transition: background-color 0.15s var(--apple-ease);
    &:hover { background: var(--surface-1); }
    &:focus-visible { outline: 3px solid oklch(from var(--color-primary) l c h / 0.3); outline-offset: -3px; }
    &::-webkit-details-marker { display: none; }
    & svg:last-child {
      @apply size-5 shrink-0 text-muted-foreground;
      transform: rotate(0deg);
      transition: transform 0.25s var(--apple-spring);
    }
  }
  & details:first-child > summary {
    @apply rounded-t-2xl;
  }
  & details:last-child > summary {
    @apply rounded-b-2xl;
  }
  & details:last-child[open] > summary {
    @apply rounded-b-none;
  }
  & details[open] > summary svg:last-child {
    transform: rotate(90deg);
  }
  & details > div, & details > p {
    @apply px-4 pt-3 pb-4 text-[13px] text-muted-foreground;
  }
  /* Smooth height animation for content */
  & details {
    interpolate-size: allow-keywords;
    & > div, & > p {
      overflow: hidden;
      transition: height 0.3s var(--apple-spring);
    }
  }
  /* Neutralize standalone styling when nested in a card */
  .card & {
    background: transparent;
    box-shadow: none;
    border-radius: 0;
    corner-shape: unset;
  }
}
